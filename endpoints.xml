<?xml version="1.0" encoding="UTF-8"?>
<endpoint-folder>

<parameter name="action" default-value=""/>
<parameter name="shortlink" default-value=""/>

	<endpoint name="hubspot-menu-items">
		<success>
			<response-transformation name="hubspot-menu-items-json"/>
		</success>
		<error>
			<response-transformation name="error-json"/>
		</error>
	</endpoint>	
	
	<endpoint name="hubspot-submit">
		<!--<parameter-transformation xslt="submit.xslt"/>-->
		<success>
			<forward-to-endpoint endpoint-name="hubspot-submit-response"/>	
		</success>
		<error>
			<response-transformation name="error-json"/>
		</error>
		<task id="hubspot-link" class="endpoints.task.CreateShortLinkToEndpointTask" destination-endpoint-name="hubspot-download" output-intermediate-value="hubspot-download" expires-in-minutes="1440"/>
	</endpoint>
	<endpoint name="hubspot-submit-response">
		<parameter-transformation xslt="submit-response.xslt"/>
		<success>
			<response-transformation name="success-json"/>		
		</success>
		<error>
			<response-transformation name="error-json"/>
		</error>	
	
		<task class="endpoints.task.RequestLogExpressionCaptureTask" key="Action" value="${action}" />
		<task class="endpoints.task.RequestLogExpressionCaptureTask" key="Shortlink" value="${shortlink}" />	
	</endpoint>
	
	<endpoint name="hubspot-download">
		<success>
			<response-from-static filename="hello-world.pdf" download-filename="hello-world.pdf"/>
		</success>
		<error>
			<response-transformation name="error-json"/>
		</error>	
	</endpoint>	
</endpoint-folder>
